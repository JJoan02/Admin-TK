
let handler = async (m, { isPrems, conn }) => {
    // Aseg√∫rate de que lastcofre est√© definido
    if (!global.db.data.users[m.sender]) {
        global.db.data.users[m.sender] = {};
        global.db.data.users[m.sender].lastcofre = 0; // Inicializa lastcofre si no existe
    }

    let time = global.db.data.users[m.sender].lastcofre + 0; // 36000000 10 Horas //86400000 24 Horas

    if (new Date() - global.db.data.users[m.sender].lastcofre < 0) {
        throw `[‚ùóùêàùêçùêÖùêé‚ùó] ùöàùô∞ ùöÅùô¥ùô≤ùôªùô∞ùôºùô∞ùöÇùöÉùô¥ ùöÉùöÑ ùô≤ùôæùôµùöÅùô¥\ùöóùöÖùöÑùô¥ùôªùöÖùô¥ ùô¥ùôΩ *${msToTime(time - new Date())}* ùôøùô∞ùöÅùô∞ ùöÖùôæùôªùöÖùô¥ùöÅ ùô∞ ùöÅùô¥ùô≤ùôªùô∞ùôºùô∞ùöÅ`;
    }

    let img = 'https://qu.ax/qmaUp.jpg'; 
    let texto = `¬ª ùôàùòºùôãùòº ùòøùôÄ ùôÜùòºùôáùòºùôÉùòºùôçùôÑ ùôÅùôçùôÄùôÄ ùôÅùôÑùôçùôÄ ‚úÖ`;

    const fkontak = {
        "key": {
            "participants": "0@s.whatsapp.net",
            "remoteJid": "status@broadcast",
            "fromMe": false,
            "id": "Halo"
        },
        "message": {
            "contactMessage": {
                "vcard": `BEGIN:VCARD\nVERSION:3.0\nN:Sy;Bot;;;\nFN:y\nitem1.TEL;waid=${m.sender.split('@')[0]}:${m.sender.split('@')[0]}\nitem1.X-ABLabel:Ponsel\nEND:VCARD`
            }
        },
        "participant": "0@s.whatsapp.net"
    };

    await conn.sendFile(m.chat, img, 'hades.jpg', texto, fkontak);
    global.db.data.users[m.sender].lastcofre = new Date().getTime(); // Actualiza lastcofre
}

handler.help = ['kalahari'];
handler.tags = ['freefire'];
handler.command = ['kalahari']; 
handler.register = false;
handler.admin = true;

export default handler;